<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>菜鸟教程(runoob.com)</title>
    <!-- <script src="http://cdn.suoluomei.com/common/js2.0/axios/axios.min.js"></script> -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <p>自定义事件</p>
    <p id="demo"></p>

    <button id="doEvent">触发事件</button><br>
    <button id="axiosBtn">axios请求</button><br>


    <script>
        //创建事件对象：
        // let customEvent = new CustomEvent('customEventName', {
        //         detail: {
        //             a: 1
        //         }
        //     })
        //     //分派事件：
        // document.dispatchEvent(customEvent)
        //     //监听事件：
        // document.addEventListener('customEventName', e => {
        //     console.log(e)
        //     console.log(e.detail.a) // 1
        //     alert(e.detail.a)
        // })

        // http://blog.haoji.me/js-custom-event.html
        // 监听事件：
        document.addEventListener('screenEvent', e => {
            console.log(e)
            console.log(e.detail) // 2
            alert(e.detail);
            alert(JSON.stringify(e.detail));
            alert(e.detail.name);
        })


        class Student {
            constructor(
                name,
                age
            ) {
                this.name = name;
                this.age = age;
            }
        }
        document.getElementById('doEvent').onclick = function() {

            // 创建事件对象：
            // let ev = document.createEvent('CustomEvent')
            //     // 初始化事件对象：
            // ev.initCustomEvent('screenEvent', false, true, {
            //         b: 2
            //     })
            //     // 分派事件：
            // document.dispatchEvent(ev)


            var st = new Student("tom", 12)
            st.name = 'jim'
                //分派事件：
            document.dispatchEvent(new CustomEvent('screenEvent', {
                detail: st
            }))


        }



        document.getElementById('axiosBtn').onclick = function() {

            // 可选地，上面的请求可以这样做
            axios.get('https://autumnfish.cn/api/joke/list?num=6')
                .then(function(response) {
                    console.log('成功=' + JSON.stringify(response));
                    console.log('成功status=' + response.status);
                    console.log('成功data=' + JSON.stringify(response.data));
                }, function(err) {
                    console.log('失败' + err);
                })


        }
    </script>


</body>

</html>